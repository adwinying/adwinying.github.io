---
import type { ImageMetadata } from "astro";
import { SEO } from "astro-seo";
import { twMerge } from "tailwind-merge";

import CommonHead from "@/components/CommonHead";
import "@/styles/main.css";

interface Props {
  title?: string;
  description?: string;
  image?: ImageMetadata | null;
  isPost?: boolean;
  className?: string;
}

const title = Astro.props.title ?? "iAdwin";
const pageTitle = Astro.props.title ? `${title} - iAdwin` : title;
const description =
  Astro.props.description ?? "The landing page of Adwin Ying.";
const type = Astro.props.isPost ? "article" : "website";
const image =
  (Astro.site?.toString() ?? "") + (Astro.props.image || "img/social.jpg");

const seo = {
  title: pageTitle,
  description,
  openGraph: {
    basic: {
      title,
      type,
      image,
    },
    optional: {
      description,
    },
    image: {
      alt: title,
    },
  },
  twitter: {
    card: "summary_large_image" as const,
  },
  extend: {
    meta: [
      { name: "viewport", content: "width=device-width, initial-scale=1.0" },
      { name: "author", content: "Adwin Ying" },
    ],
  },
};

const className = Astro.props.className ?? "";
---

{/* eslint-disable react/no-unknown-property */}
<html lang="en">
  <head>
    {/* eslint-disable-next-line react/jsx-props-no-spreading */}
    <SEO {...seo} />
    <CommonHead />

    <slot name="head" />
  </head>

  <body class={twMerge("flex flex-col bg-gray-50 min-h-screen", className)}>
    <slot />
  </body>
</html>
