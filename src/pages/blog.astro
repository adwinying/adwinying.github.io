---
import { getCollection } from "astro:content";

import BlogHeader from "@/components/BlogHeader";
import BlogIndex from "@/components/BlogIndex";
import Footer from "@/components/Footer";
import BaseLayout from "@/layouts/base.astro";

const posts = await getCollection(
  "posts",
  ({ data }) => process.env.NODE_ENV === "development" || !data.draft,
);
---

<BaseLayout title="Blog" description="A place to gather and sort thoughts.">
  <BlogHeader />

  <BlogIndex className="mt-4 mb-12 flex-grow" posts={posts} />

  <Footer />
</BaseLayout>
