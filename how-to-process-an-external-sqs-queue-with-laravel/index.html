<!DOCTYPE html>
<html lang="en">
<head>
  <title>How to Process an External SQS Queue with Laravel - iAdwin</title>

<link rel="canonical" href="https://iadw.in/how-to-process-an-external-sqs-queue-with-laravel/">

<meta name="description" content="Although Laravel's queues are designed for internal use, how do you process a queue that is shared with an external system?">

<meta name="robots" content="index, follow">

<meta property="og:title" content="How to Process an External SQS Queue with Laravel">
<meta property="og:type" content="article">
<meta property="og:image" content="https://iadw.in/img/social.jpg">
<meta property="og:url" content="https://iadw.in/how-to-process-an-external-sqs-queue-with-laravel/">


<meta property="og:description" content="Although Laravel's queues are designed for internal use, how do you process a queue that is shared with an external system?">






<meta property="og:image:url" content="https://iadw.in/img/social.jpg">



<meta property="og:image:height">
<meta property="og:image:alt" content="How to Process an External SQS Queue with Laravel">


<meta name="twitter:card" content="summary_large_image">




<meta content="width=device-width, initial-scale=1.0" name="viewport"><meta content="Adwin Ying" name="author">


  <meta charSet="UTF-8"/><meta name="theme-color" content="#ffffff"/><link rel="icon" href="/favicon.svg"/><link rel="mask-icon" href="/mask-icon.svg" color="#000000"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="manifest" href="/manifest.json"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,500;1,500&amp;family=Open+Sans:ital,wght@0,300;0,400;0,700;1,400;1,700&amp;display=swap"/><script async="" defer="" data-website-id="5defccd5-b1c2-4556-8635-cfd36e168899" src="https://u.iadw.in/bundle.js"></script>

  
<link rel="stylesheet" href="/assets/404-_slug_-blog-index-tag-_tag_.e5d1e939.css" /></head>

<body class="flex flex-col bg-gray-50 min-h-screen ">
  <header class="container mx-auto flex items-center space-x-3 px-5 py-7"><a href="/" class="font-title text-3xl tracking-wider" aria-label="iAdwin">iA</a><span class="h-9 border-r-[2.5px] border-black"></span><a href="/blog" class="font-sans text-3xl font-normal text-gray-900">Blog</a><a href="/blog/rss.xml" target="_parent"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="mt-1 h-5"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg></a></header><article class="mx-auto w-full max-w-blog p-5 pb-9"><div class="mb-8 font-sans"><h1 class="mb-1 text-5xl font-bold text-gray-900">How to Process an External SQS Queue with Laravel</h1><span class="inline-block text-sm text-gray-600">10 Feb 2023<!-- --> | <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="mr-1 inline-block h-2.5"><path fill="currentColor" d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></svg><a href="/tag/aws/" class="text-sm text-gray-600 underline-offset-1 hover:underline ">aws</a>, <a href="/tag/sqs/" class="text-sm text-gray-600 underline-offset-1 hover:underline ">sqs</a>, <a href="/tag/laravel/" class="text-sm text-gray-600 underline-offset-1 hover:underline ">laravel</a>, <a href="/tag/php/" class="text-sm text-gray-600 underline-offset-1 hover:underline ">php</a>, <a href="/tag/queue/" class="text-sm text-gray-600 underline-offset-1 hover:underline ">queue</a>, <a href="/tag/tutorial/" class="text-sm text-gray-600 underline-offset-1 hover:underline ">tutorial</a></span></div><div class="prose prose-lg max-w-none font-serif
          prose-headings:font-sans prose-figcaption:text-center
          prose-figcaption:font-sans prose-figcaption:text-sm"><p>Laravel has an excellent built-in <a href="https://laravel.com/docs/9.x/queues">queue</a> feature, which let's you dispatch long-running processes that need to be run asynchronously in the background. However, Laravel's queue feature is only meant to be used internally, where jobs are dispatched and processed within the application itself. What if you want to process jobs that have been dispatched by an external application?</p>
<h2 id="using-a-library">Using a Library</h2>
<p>You could try to use one of the many libraries that allows you to process external queues, like these:</p>
<ul>
<li><a href="https://github.com/pawprintdigital/laravel-queue-raw-sqs">https://github.com/pawprintdigital/laravel-queue-raw-sqs</a></li>
<li><a href="https://github.com/primitivesense/laravel-raw-sqs-connector">https://github.com/primitivesense/laravel-raw-sqs-connector</a></li>
</ul>
<p>However, most of these libraries are outdated and do not support the latest version of Laravel or PHP.</p>
<h2 id="reinventing-the-wheel">Reinventing the Wheel</h2>
<p>Not satisfied with the solutions out there, I decided to try to hack a workaround to process an external queue.</p>
<h3 id="reverse-engineering-a-job-dispatched-from-laravel">Reverse Engineering a Job Dispatched from Laravel</h3>
<p>So this is what Laravel sends to a job when it is dispatched:</p>
<pre is:raw="" class="astro-code" style="background-color: #2e3440ff; overflow-x: auto;"><code><span class="line"><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">uuid</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">09f4bed5-e23d-4800-a99b-0cd7c0afe6f5</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">displayName</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">App</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">Jobs</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">MyJob</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">job</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Illuminate</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">Queue</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">CallQueuedHandler@call</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">maxTries</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">null</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">maxExceptions</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">null</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">failOnTimeout</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">false</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">backoff</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">null</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">timeout</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">null</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">retryUntil</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">null</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">data</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">commandName</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">App</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">Jobs</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">MyJob</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">command</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">O:50:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">App</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">Jobs</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">MyJob</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">:11:{s:56:</span><span style="color: #EBCB8B">\"\u0000</span><span style="color: #A3BE8C">App</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">Jobs</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">MyJob</span><span style="color: #EBCB8B">\u0000</span><span style="color: #A3BE8C">data</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;a:2:{i:0;s:5:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">hello</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;i:1;s:6:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">world</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;}s:3:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">job</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;N;s:5:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">queue</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;N;s:15:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">chainConnection</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;N;s:10:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">chainQueue</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;N;s:19:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">chainCatchCallbacks</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;N;s:5:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">delay</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;N;s:11:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">afterCommit</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;N;s:10:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">middleware</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;a:0:{}s:7:</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">chained</span><span style="color: #EBCB8B">\"</span><span style="color: #A3BE8C">;a:0:{}}</span><span style="color: #ECEFF4">"</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>As you can see, the content is somewhat complex, and <code>data.command</code> is a PHP <code>serialize()</code>-ed string, which is hard to reproduce if you're not enqueueing from a PHP system. With a lot of trial and error, I managed to simplify it down to something like this:</p>
<pre is:raw="" class="astro-code" style="background-color: #2e3440ff; overflow-x: auto;"><code><span class="line"><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">uuid</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">09f4bed5-e23d-4800-a99b-0cd7c0afe6f5</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">job</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">App</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">Jobs</span><span style="color: #EBCB8B">\\</span><span style="color: #A3BE8C">MyJob@rawDispatch</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span></span>
<span class="line"><span style="color: #D8DEE9FF">  </span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">data</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span><span style="color: #ECEFF4">"</span><span style="color: #8FBCBB">hello</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">:</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">world</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>This is much more easier to reproduce with an external dispatcher.</p>
<h3 id="creating-the-custom-method">Creating the Custom Method</h3>
<p>Based on the simplified job content, you will notice that <code>job</code> is now your job class with a method name <code>rawDispatch</code>. Laravel's queue worker will now call your job class directly. You'll need to create a method within your job class like so:</p>
<pre is:raw="" class="astro-code" style="background-color: #2e3440ff; overflow-x: auto;"><code><span class="line"><span style="color: #81A1C1">use</span><span style="color: #D8DEE9FF"> Illuminate</span><span style="color: #ECEFF4">\</span><span style="color: #D8DEE9FF">Queue</span><span style="color: #ECEFF4">\</span><span style="color: #D8DEE9FF">Jobs</span><span style="color: #ECEFF4">\</span><span style="color: #8FBCBB">Job</span><span style="color: #81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #81A1C1">class</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB">MyJob</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">implements</span><span style="color: #D8DEE9FF"> </span><span style="color: #8FBCBB; font-weight: bold">ShouldQueue</span></span>
<span class="line"><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">private</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">$</span><span style="color: #D8DEE9">data</span><span style="color: #81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">    </span><span style="color: #616E88">// arguments in the construct function must be instantiable by Laravel</span></span>
<span class="line"><span style="color: #ECEFF4">    </span><span style="color: #616E88">// ie. No required arguments can be used</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">public</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">__construct</span><span style="color: #ECEFF4">(</span><span style="color: #81A1C1">array</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">$</span><span style="color: #D8DEE9">data</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">[])</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">$this-></span><span style="color: #D8DEE9">data</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">$</span><span style="color: #D8DEE9">data</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">public</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">rawDispatch</span><span style="color: #ECEFF4">(</span><span style="color: #8FBCBB">Job</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">$</span><span style="color: #D8DEE9">job</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">array</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">$</span><span style="color: #D8DEE9">data</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// we'll need to set the job instance manually:</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">$this-></span><span style="color: #D8DEE9">job</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">$</span><span style="color: #D8DEE9">job</span><span style="color: #81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// run the job synchronously within the same process</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">$this-></span><span style="color: #88C0D0">dispatchAsync</span><span style="color: #ECEFF4">(</span><span style="color: #81A1C1">$</span><span style="color: #D8DEE9">data</span><span style="color: #ECEFF4">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// when job is completed, it will not be deleted automatically so</span></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// you'll need to manually do so, or else the job will reappear in the</span></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// queue and cause duplicate processing</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">$this-></span><span style="color: #88C0D0">delete</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">public</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">function</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">handle</span><span style="color: #ECEFF4">()</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #ECEFF4">        </span><span style="color: #616E88">// your job processing logic here as usual</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #88C0D0">dump</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">'</span><span style="color: #A3BE8C">Received data:</span><span style="color: #ECEFF4">'</span><span style="color: #ECEFF4">,</span><span style="color: #88C0D0"> </span><span style="color: #81A1C1">$this-></span><span style="color: #D8DEE9">data</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<h3 id="testing-it-out">Testing it out</h3>
<p>Once you configure the SQS queue driver, you should be able to receive jobs from an external queue. Start a queue worker using the following command:</p>
<pre is:raw="" class="astro-code" style="background-color: #2e3440ff; overflow-x: auto;"><code><span class="line"><span style="color: #D8DEE9FF">$ php artisan queue:listen </span><span style="color: #ECEFF4">[</span><span style="color: #D8DEE9FF">your-queue-driver-name</span><span style="color: #ECEFF4">]</span></span></code></pre>
<p>If everything went according to plan, you should see the following output when you dispatch a job to SQS:</p>
<pre is:raw="" class="astro-code" style="background-color: #2e3440ff; overflow-x: auto;"><code><span class="line"><span style="color: #d8dee9ff">INFO  Processing jobs from the [your-queue-name] queue.</span></span>
<span class="line"><span style="color: #d8dee9ff"></span></span>
<span class="line"><span style="color: #d8dee9ff">"Received data:" // app/Jobs/MyJob.php:70</span></span>
<span class="line"><span style="color: #d8dee9ff">array:1 [ // app/Jobs/MyJob.php:70</span></span>
<span class="line"><span style="color: #d8dee9ff">  "hello" => "world"</span></span>
<span class="line"><span style="color: #d8dee9ff">]</span></span></code></pre><hr/></div><div class="flex flex-col space-y-3 sm:flex-row sm:items-center sm:space-x-5 sm:space-y-0 mt-14 mb-9 font-sans text-base"><div class="w-28 sm:w-32"><img src="/img/avatar.png" srcSet="/assets/avatar@112w.377da505.png 112w, /assets/avatar@128w.9acea303.png 128w" alt="Adwin Ying&#x27;s avatar"/></div><div class="flex flex-1 flex-col space-y-1"><span class="text-2xl font-bold">Adwin Ying</span><p class="text-gray-800">Self-taught full-stack web dev based in Tokyo.<!-- --> <br class="hidden sm:block"/>Occasionally wrecks servers through <a class="text-sky-500 hover:text-sky-700 " href="https://www.reddit.com/r/selfhosted/">self-hosting</a> and <a class="text-sky-500 hover:text-sky-700 " href="https://www.reddit.com/r/homelab/">homelab-ing</a>.</p><div class="flex"><a class="text-sky-500 hover:text-sky-700 flex space-x-1" href="/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-4"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg><span>https://iAdw.in</span></a></div></div></div><a class="text-sky-500 hover:text-sky-700 font-sans !text-gray-900 underline underline-offset-2" href="/blog">← Back to all posts</a></article><footer class="bg-black py-3 text-center text-gray-50">iAdwin © <!-- -->2023<!-- --> Adwin Ying.</footer>
</body></html>